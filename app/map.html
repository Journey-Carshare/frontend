<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="104JOQ6UgkuPWAl5Z2oYSsOJMLLUL_XcWqbuzAk2oXs">
    <link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>Journeys.io | Map</title>

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <link rel="stylesheet" href="styles/font-awesome.min.css">
</head>
<body>
    <nav class="mat-nav" id="nav">
        <div class="top-bar">
            <a href="#" id="peek-show"><i class="fa fa-bars"></i></a>
            <div class="title">Carshares</div>
            <div class="button"></div>
        </div>
        <div class="mat-menu" id="peek">
            <div class="mat-left">
                <div class="mat-left-user">
                    <img src="../images/profile_user.jpg" alt="cloud">
                    <div class="name">Edward Wright</div>
                    <div class="position">Software Engineer</div>
                </div>
                <div class="mat-left-items">
                    <a href="./calendar.html"><i class="fa fa-calendar"></i> Home</a>
                    <a href="./map.html"><i class="fa fa-car"></i> Journeys</a>
                    <a href="./profile.html"><i class="fa fa-user"></i> Profile</a>
                    <a href="./settings.html"><i class="fa fa-cog"></i> Settings</a>
                    <a href="./index.html"><i class="fa fa-sign-out"></i> Logout</a>
                </div>
            </div>
            <a href="#" id="peek-hide" class="mat-right"></a>
        </div>
    </nav>
<ul class="flex-container">
    <li class="flex-item" id="mapflex">
        <div id="map"></div>
    </li>
    <li class="flex-item item-list-container" id="belowflex">
        <!-- <div class="map-info">
            <div class="map-info-element">
                Carshares to Reading
            </div>
        </div> -->
        <div class="item-list" id="map-list">
            <!-- <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 2.4 Miles</div>
                <div class="item-title">Jacques Reading</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 3.6 Miles</div>
                <div class="item-title">Edward Wright</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 5.4 Miles</div>
                <div class="item-title">Karan Sethi</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 2.4 Miles</div>
                <div class="item-title">Jacques Reading</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 3.6 Miles</div>
                <div class="item-title">Edward Wright</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 5.4 Miles</div>
                <div class="item-title">Karan Sethi</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 2.4 Miles</div>
                <div class="item-title">Jacques Reading</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 3.6 Miles</div>
                <div class="item-title">Edward Wright</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 5.4 Miles</div>
                <div class="item-title">Karan Sethi</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a>
            <a href="./profile.html">
                <div class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i> 2.4 Miles</div>
                <div class="item-title">Jacques Reading</div>
                <div class="item-small-content"><i class="fa fa-caret-down"></i></div>
            </a> -->
        </div>
    </li>
</ul>
<!-- <div class="bottom-bar-container">
    <div class="bottom-bar">
        <a href="#"><i class="fa fa-cog"></i></a>
        <a href="#"><i class="fa fa-cog"></i></a>
        <a href="#" class="plus"><i class="fa fa-plus"></i></a>
        <a href="#"><i class="fa fa-cog"></i></a>
        <a href="#"><i class="fa fa-cog"></i></a>
    </div>
</div> -->
<script>
var map;
function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
        //center: {lat: 51.3057676, lng: -0.5494706},
        //zoom: 9,
        disableDefaultUI: true
    });
}

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD284odf2blHXmEQ64JoprTYFjGsp4s4hk&callback=initMap"></script>
<!-- build:js scripts/nav.js -->
<script src="scripts/nav.js"></script>
<!-- endbuild -->
<script>
function getMapJSON(){
    return $.getJSON( "data/map.json").then(function(data) {
        return data;
    });
};

function setupCalendarDiv() {
    "use strict";
    var output = "";
    var j;
    getMapJSON().then(function(returndata){
        var calData = returndata;
        // console.log(calData);
        for(j = 0; j < calData.carshares.length; j++){
            output += "<a href='./profile.html?p=" + calData.carshares[j].link + "'>";
                output += "<div class='icon'><i class='fa fa-map-marker' aria-hidden='true'></i> " + calData.carshares[j].distance + " Miles</div>";
                output += "<div class='item-title'>" + calData.carshares[j].name;
                output += "</div><div class='item-small-content'><i class='fa fa-caret-down'></i></div></a>";
        }
        document.getElementById("map-list").innerHTML = output;
    });
}
setupCalendarDiv();
</script>
<script>

$(window).load(function(){
    var geocoder = new google.maps.Geocoder();
    var globalMarker = [];
    function updateGlobalMarker(append) {
        globalMarker.push(append);
    };
    function geocodeAddress(geocoder, resultsMap, addressInput) {
        var address = addressInput;
        geocoder.geocode({'address': address}, function(results, status) {
            if (status === 'OK') {
                //resultsMap.setCenter(results[0].geometry.location);
                console.log(results[0].geometry.location.lat());

                var myLatLang;
                var myLat;
                var myLng;

                var rand = Math.random();
                var change = 0.005 * rand;
                if(rand > 0.5){
                    myLat = results[0].geometry.location.lat() + change;
                } else {
                    myLat = results[0].geometry.location.lat() - change;
                }
                console.log(results[0].geometry.location.lat());

                var rand = Math.random();
                var change = 0.005 * rand;
                if(rand > 0.5){
                    myLng = results[0].geometry.location.lng() + change;
                } else {
                    myLng = results[0].geometry.location.lng() - change;
                }

                var myLatLang = {lat: myLat, lng: myLng};

                var Marker = new google.maps.Marker({
                    map: resultsMap,
                    //position: results[0].geometry.location
                    position: myLatLang
                })
                globalMarker.push(Marker);
                console.log(globalMarker);

                var bounds = new google.maps.LatLngBounds();
                for (var i=0; i < globalMarker.length; i++) {
                    bounds.extend(globalMarker[i].getPosition());
                }
                map.fitBounds(bounds);
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    };


    geocodeAddress(geocoder, map, "HA55NE");  //harrow
    geocodeAddress(geocoder, map, "W12 7DA"); //shepards bush
    geocodeAddress(geocoder, map, "UB79HF");  //west drayton
    geocodeAddress(geocoder, map, "HA0 4RF");  //west drayton
})
</script>
</body>
</html>
