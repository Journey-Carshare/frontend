"use strict";function getCookie(e){var n="; "+document.cookie,t=n.split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}$("#alert").hide(),$("#destination-elements").hide(),$(".week_select").hide();var date=new Date;$("input[name=journey_start_date]").val(date.toISOString().substr(0,10)),$("input[name=journey_origin_time]").val(date.toISOString().substr(11,5)),date.setHours(date.getHours()+1),$("input[name=journey_destination_time]").val(date.toISOString().substr(11,5)),$("input[name=is_return]").change(function(){$(this).is(":checked")?($("#destination-elements").show(500),$("input[name=journey_destination_time]").prop("required",!0),$("input[name=journey_destination_postcode]").prop("required",!0),$("input[name=journey_destination_name]").prop("required",!0)):($("#destination-elements").hide(500),$("input[name=journey_destination_time]").prop("required",!1),$("input[name=journey_destination_postcode]").prop("required",!1),$("input[name=journey_destination_name]").prop("required",!1))}),$("input[name=is_recurring]").change(function(){$(this).is(":checked")?$(".week_select").show(250):$(".week_select").hide(250)});var days_of_week=[],is_recurring=!1,is_return=!1,is_journey=!0,journey_title,journey_start_date,journey_end_date,journey_origin_name,journey_origin_time,journey_origin_postcode,journey_origin_latitude,journey_origin_longitude,journey_origin_incode,journey_origin_outcode,journey_destination_name,journey_destination_time,journey_destination_postcode,journey_destination_latitude,journey_destination_longitude,journey_destination_incode,journey_destination_outcode,origin_postcode_val,return_postcode_val;$("#addForm").submit(function(e){e.preventDefault();for(var n=$("#addForm").serializeArray(),t=0;t<n.length;t++){"is_recurring"===n[t].name&&(is_recurring=!!n[t].value),"is_return"===n[t].name&&(is_return=!!n[t].value);for(var o=0;o<7;o++){var i="sel_"+o;n[t].name===i&&days_of_week.push(o)}"journey_title"===n[t].name&&(journey_title=n[t].value),"journey_start_date"===n[t].name&&(journey_start_date=n[t].value),"journey_end_date"===n[t].name&&(journey_end_date=n[t].value),"journey_origin_name"===n[t].name&&(journey_origin_name=n[t].value),"journey_origin_time"===n[t].name&&(journey_origin_time=n[t].value),"journey_origin_postcode"===n[t].name&&(origin_postcode_val=n[t].value),"journey_destination_name"===n[t].name&&(journey_destination_name=n[t].value),"journey_destination_time"===n[t].name&&(journey_destination_time=n[t].value),"journey_destination_postcode"===n[t].name&&(return_postcode_val=n[t].value)}$.when($.ajax({dataType:"jsonp",url:"https://api.postcodes.io/postcodes/"+origin_postcode_val}),$.ajax({dataType:"jsonp",url:"https://api.postcodes.io/postcodes/"+return_postcode_val}),$.ajax({dataType:"json",crossDomain:!0,type:"POST",data:JSON.stringify({id:getCookie("Cookie")}),url:"https://p6flgqzkv2.execute-api.eu-west-1.amazonaws.com/stage1/user/login/check"})).done(function(e,n,t){var o={journey_user_id:t[0],journey_title:journey_title,journey_start_date:journey_start_date,journey_end_date:journey_end_date,journey_origin_name:journey_origin_name,journey_origin_postcode:e[0].result.postcode,journey_origin_latitude:e[0].result.latitude,journey_origin_longitude:e[0].result.longitude,journey_origin_incode:e[0].result.incode,journey_origin_outcode:e[0].result.outcode,journey_origin_time:journey_origin_time,journey_destination_name:journey_destination_name,journey_destination_postcode:n[0].result.postcode,journey_destination_latitude:n[0].result.latitude,journey_destination_longitude:n[0].result.longitude,journey_destination_incode:n[0].result.incode,journey_destination_outcode:n[0].result.outcode,journey_destination_time:journey_destination_time,is_journey:is_journey,is_recurring:is_recurring,is_return:is_return,days_of_week:days_of_week};$.ajax({type:"POST",url:"https://p6flgqzkv2.execute-api.eu-west-1.amazonaws.com/stage1/journeys",data:JSON.stringify(o),success:function(e){},error:function(e){}})})});